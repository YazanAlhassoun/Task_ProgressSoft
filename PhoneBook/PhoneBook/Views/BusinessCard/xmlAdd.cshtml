
@{
    ViewBag.Title = "xmlAdd";
}

<div id="contact" class="contact-us section">
    <div class="container">
        <div class="row">

            <div class="col-lg-12 wow fadeInUp" data-wow-duration="0.5s" data-wow-delay="0.25s">


                @using (Html.BeginForm("Upload", "BusinessCard", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    <div class="row">
                        <div class="col-sm-1 col-md-6 col-xs-12">
                            <h5 class="text-danger">@ViewBag.Error</h5>
                            <h5 class="text-success">@ViewBag.Success</h5>
                            <div class="form-group">
                                <label>Choose XML File:</label>
                                <div class="input-group">

                                    <div class="custom-file">
                                        <input id="xmlFile" name="xmlFile" type="file" class="custom-file-input" />
                                        <label class="custom-file-label"></label>
                                    </div>
                                    <div class="input-group-append">


                                        <input type="submit" class="btn btn-primary" value="Upload" />
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                }

            </div>
        </div>
    </div>
</div>

@*<div class="container">
        <div class="row">
            <div class="col-lg-auto">


                @using (Html.BeginForm("Upload", "BusinessCard", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    <div class="frame">
                        <div class="center">
                            <div class="bar"></div>
                            <div class="title">Drop file to upload</div>
                            <div class="dropzone">
                                <div class="content">
                                    <img src="https://100dayscss.com/codepen/upload.svg" class="upload">
                                    <span class="filename"></span>
                                    <input type="file" class="input">
                                </div>
                            </div>

                            <input type="submit" class="upload-btn" value="Upload file">
                        </div>
                    </div>


                }


            </div>
        </div>
    </div>*@


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script type="text/javascript">

        $(document).ready(function () {
            $('form').validate({
                rules: {
                    xmlFile: {
                        required: true
                    }
                },
                messages: {
                    xmlFile: "Choose file to upload",
                }
            })

            var droppedFiles = false;
            var fileName = '';
            var $dropzone = $('.dropzone');
            var $button = $('.upload-btn');
            var uploading = false;
            var $syncing = $('.syncing');
            var $done = $('.done');
            var $bar = $('.bar');
            var timeOut;

            $dropzone.on('drag dragstart dragend dragover dragenter dragleave drop', function (e) {
                e.preventDefault();
                e.stopPropagation();
            })
                .on('dragover dragenter', function () {
                    $dropzone.addClass('is-dragover');
                })
                .on('dragleave dragend drop', function () {
                    $dropzone.removeClass('is-dragover');
                })
                .on('drop', function (e) {
                    droppedFiles = e.originalEvent.dataTransfer.files;
                    fileName = droppedFiles[0]['name'];
                    $('.filename').html(fileName);
                    $('.dropzone .upload').hide();
                });

            $button.bind('click', function () {
                startUpload();
            });

            $("input:file").change(function () {
                fileName = $(this)[0].files[0].name;
                $('.filename').html(fileName);
                $('.dropzone .upload').hide();
            });

            function startUpload() {
                if (!uploading && fileName != '') {
                    uploading = true;
                    $button.html('Uploading...');
                    $dropzone.fadeOut();
                    $syncing.addClass('active');
                    $done.addClass('active');
                    $bar.addClass('active');
                    timeoutID = window.setTimeout(showDone, 3200);
                }
            }

            function showDone() {
                $button.html('Done');
            }

        });
    </script>
}
